# Air Quality Monitor 프로젝트 계획서

## 📋 프로젝트 개요
- **목표**: NodeMCU v3 기반 실내 공기질 측정 및 자동 제어 시스템
- **플랫폼**: ESPHome (Home Assistant 연동)
- **주요 기능**: 4가지 센서 데이터 측정, 자동 기기 제어, 웹/앱 모니터링

## 🎯 측정 센서 구성
| 센서 | 모델 | 측정 항목 | 통신 | 상태 |
|------|------|----------|------|------|
| CO₂/온습도 | SCD30 | 400-40000 ppm, -40~70°C, 0~100%RH | I2C | 설계완료 |
| 미세먼지 | PMS7003 | PM1.0/2.5/10 | UART | **테스트중** |
| VOC | SGP40 | VOC Index | I2C | 설계완료 |
| 온습도 | SHT20 | -40~125°C, 0~100%RH | I2C | 선택사항 |

## 🔧 하드웨어 구성
- **컨트롤러**: NodeMCU v3 (ESP8266)
- **디스플레이**: ST7735 TFT LCD (128x128)
- **제어 출력**: 3개 GPIO (환기팬/공기청정기/가습기)
- **상태 표시**: RGB LED (공기질 상태별 색상)
- **입력**: 아날로그 버튼 (CO₂ 보정용)

## 📈 진행 상황

### ✅ 완료된 작업
1. **하드웨어 설계**
   - NodeMCU v3 핀아웃 매핑 완료
   - 센서별 연결 방식 확정
   - 전원 및 통신 라인 설계

2. **ESPHome 설정**
   - YAML 구성 파일 작성 완료
   - 센서별 플랫폼 매핑 완료
   - WiFi, API, OTA 설정 완료

3. **소프트웨어 아키텍처**
   - 4개 센서 통합 설계
   - 자동 제어 로직 구현
   - Home Assistant 연동 준비

### 🔄 현재 진행중
1. **단계별 센서 테스트**
   - **1단계**: PMS7003 미세먼지 센서 (진행중)
   - 다른 센서들 임시 비활성화
   - 안정성 검증 후 순차 활성화

## 📅 향후 계획

### Phase 1: 센서 검증 (1-2주)
- [ ] PMS7003 미세먼지 센서 테스트
- [ ] SHT20 온습도 센서 추가 테스트
- [ ] MH-Z19B CO₂ 센서 추가 테스트
- [ ] ENS160 TVOC 센서 추가 테스트

### Phase 2: 통합 기능 (1주)
- [ ] 모든 센서 동시 작동 테스트
- [ ] 공기질 종합 점수 알고리즘 검증
- [ ] 센서 데이터 안정성 확인

### Phase 3: 자동 제어 (1주)
- [ ] 하드웨어 제어 출력 테스트
- [ ] RGB LED 상태 표시 기능
- [ ] 임계값 기반 자동 제어 로직

### Phase 4: 사용자 인터페이스 (1주)
- [ ] TFT LCD 디스플레이 구현
- [ ] 웹 인터페이스 최적화
- [ ] Home Assistant 대시보드 구성

### Phase 5: 최적화 및 배포 (1주)
- [ ] 성능 최적화 및 버그 수정
- [ ] 사용자 매뉴얼 작성
- [ ] 최종 테스트 및 검증

## 🎯 기대 효과
- **실시간 모니터링**: 4가지 공기질 지표 동시 측정
- **스마트 제어**: 센서값 기반 자동 환경 개선
- **원격 관리**: Home Assistant 통한 모바일 접근
- **확장성**: 추가 센서/기기 연동 용이

## ⚠️ 주요 고려사항
- **센서 호환성**: ESPHome 플랫폼별 지원 상태 확인
- **핀 제약**: NodeMCU v3의 제한된 GPIO 효율적 활용
- **전력 관리**: 센서별 전력 소모 최적화
- **통신 안정성**: UART/I2C 동시 사용시 간섭 방지

---
*최종 업데이트: 2025-10-25*
*현재 상태: Phase 1 진행중 (PMS7003 테스트)*